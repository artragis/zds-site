{% extends "tutorialv2/base.html" %}
{% load emarkdown %}
{% load repo_reader %}
{% load thumbnail %}
{% load i18n %}


{% block title %}
    {{ content.title }}
{% endblock %}



{% block breadcrumb %}
    <li><a href="{{ content.get_absolute_url }}">{{ content.title }}</a></li>
    <li><a href="{% url "content:history" content.pk content.slug %}">{% trans "Historique des modifications" %}</a></li>
    <li>{%  trans "Différence avec la dernière version" %}</li>
{% endblock %}



{# No sidebar on this page #}
{% block body_class %}no-sidebar{% endblock %}
{% block sidebar %}{% endblock %}



{% block headline %}
    <h1 {% if content.image %}class="illu"{% endif %}>
        {% if content.image %}
            <img src="{{content.image.physical.tutorial_illu.url }}" alt="">
        {% endif %}
        {{ content.title }}
    </h1>

    {% include 'tutorialv2/includes/tags_authors.part.html' %}
{% endblock %}



{% block content_ext %}
    <p>
    <b>Message de commit :</b> {{ commit_msg }}
    </p>

    <h2>{% trans "Nouveaux Fichiers" %}</h2>
    {% for add in path_add %}
        {% with add_next=add.b_blob|repo_blob %}
            <h3>{{ add.b_blob.path }}</h3>
            <div class="diff_delta">
                {{ ''|diff_text:add_next|safe }}
            </div>
        {% endwith %}
    {% endfor %}

    <h2>{% trans "Fichiers Modifiés" %}</h2>
    {% for maj in path_maj %}
        {% with maj_next=maj.b_blob|repo_blob %}
            {% with maj_prev=maj.a_blob|repo_blob %}
                <h3>{{ maj.a_blob.path }}</h3>
                <div class="diff_delta">
                    {{ maj_prev|diff_text:maj_next|safe }}
                </div>
            {% endwith %}
        {% endwith %}
    {% endfor %}
{% endblock %}